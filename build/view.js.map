{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///@media-manager/components/src/icons/index.js","webpack:///@media-manager/components/src/index.js","webpack:///@media-manager/components/src/media-player/index.js","webpack:///@media-manager/media-connect/src/constants.js","webpack:///@media-manager/media-connect/src/hooks/use-current-time/index.js","webpack:///@media-manager/media-connect/src/hooks/use-media-source-id/index.js","webpack:///@media-manager/media-connect/src/hooks/use-media-store/index.js","webpack:///@media-manager/media-connect/src/index.js","webpack:///@media-manager/media-connect/src/store/actions.js","webpack:///@media-manager/media-connect/src/store/constants.js","webpack:///@media-manager/media-connect/src/store/index.js","webpack:///@media-manager/media-connect/src/store/reducer.js","webpack:///@media-manager/media-connect/src/store/selectors.js","webpack:///@media-manager/time-utils/src/index.js","webpack:///./src/block-library/pause-button/view.js","webpack:///./src/block-library/play-button/view.js","webpack:///./src/block-library/play-pause-button/view.js","webpack:///./src/block-library/time-position/view.js","webpack:///./src/block-library/view.js","webpack:///./src/extending/constants.js","webpack:///./src/extending/media-blocks/media-source-provider-wrapper/index.js","webpack:///./src/extending/media-blocks/view.js","webpack:///./src/extending/utils.js","webpack:///./src/extending/view.js","webpack:///./src/view.js","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"compose\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"domReady\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external \"lodash\""],"names":["MovieIcon","MediaCenterIcon","MediaLinkIcon","withScale","createHigherOrderComponent","Icon","props","scale","PlayerPlayIcon","PlayerPauseIcon","ControlForwardFiveIcon","ControlBackFiveIcon","PlayerPlayPauseIcon","PlayerIcon","TimePositionIcon","MediaConnectIcon","other","__","isPaused","onChange","useState","useEffect","setRangeTime","setCurrentTime","useMediaStore","debouncedOnChange","useCallback","debounce","debOnChange","toggle","currentTimeFormatted","convertSecondsToTimeCode","onChangeTimeHandler","Math","time","toggleInTime","STORE_NAME","STATE_PLAYING","STATE_ERROR","STATE_PAUSED","MEDIA_NOT_DEFINED","useSelect","select","currentTime","context","attributes","duration","state","playingState","isReady","updateMediaSourceData","useDispatch","className","play","playMediaSource","pause","pauseMediaSource","toggleMediaSource","register","registerMediaSource","unregister","mediaSourceId","unregisterMediaSource","updateData","timestamp","setMediaSourceCurrentTime","type","mediaSourceState","data","id","STATE_NOT_READY","DEFAULT_STATE","sources","default","store","createReduxStore","selectors","actionId","action","Object","currentState","playerId","keys","defaultMediaSource","getDefaultMediaSource","mediaSource","document","timecodeRegExp","multiple","singleTimecodeRegExp","multipleTimecodeRegExp","markdownTimeformat","markdownTimeformatRegExp","seconds","convertTimeCodeToSeconds","string","isTimeformat","parts","Number","value","isMarkdownTimeformat","hasMultipleTimeformats","getTimeformatMatch","PauseBlock","PlayBlock","PlayPauseBlock","TimePositionDisplayEditBlock","useCurrentTime","BLOCK_NAME_CORE_VIDEO","BLOCK_NAME_CORE_AUDIO","BLOCK_NAME_CORE_PARAGRAPH","BLOCK_NAME_CORE_HEADING","BLOCK_NAME_CORE_QUOTE","BLOCK_NAME_CORE_LIST","EXTENDED_MEDIA_BLOCKS","MEDIA_BLOCKS_ATTRIBUTE_SCHEMA","name","domTypeName","EXTEND_BLOCKS_WITH_MEDIA","MEDIA_CURRENT_TIME_THRESHOLD","MEDIA_CURRENT_STATE_THRESHOLD","MediaSourceProviderWrapper","mediaElement","elementType","querySelector","playMedia","pauseMedia","mediaManagerStore","getMediaSourceCurrentTime","catch","onMetadataReady","event","srcElement","preload","autoplay","addEventListener","removeEventListener","paused","debouncedAction","cancel","throttledTimeChange","throttle","leading","trailing","onTimeUpdate","e","target","abs","floor","renderPlayerComponentBlock","playerButtonElement","PlayerButtonComponent","classList","contains","PlayPauseButtonBlock","PlayButtonBlock","PauseButtonBlock","TimePositionBlock","render","domReady","mediaElements","querySelectorAll","length","forEach","media","mediaSourceType","dataset","getBlockSourceProps","query","mediaSourceConsumers","buttonBlockCssClass","linkFormatCssClass","mediaCenterBlock","mediaSourceReference","isButtonBlock","mediaPlayerButtons","mediaFormatLinks","isMediaBlockListed","indexOf","isBlockListed","hasBlockValidScheme","blockSchema","shouldExtendMediaBlock","settings","shouldExtendBlockWithMedia","selectedBlock","blockEditorStore","getSelectedBlock","clientId","getBlockParentsByBlockName"],"mappings":"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","file":"view.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/view.js\");\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/components';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\nexport const MovieIcon = () => (\n\t<SVG\n\t\txmlns=\"https://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t>\n\t\t<Path d=\"M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z\" />\n\t</SVG>\n);\n\nexport const MediaCenterIcon = () => (\n\t<SVG\n\t\txmlns=\"https://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t>\n\t\t<Path d=\"M7,11v2h10v-2c0-1.86,1.28-3.41,3-3.86V6c0-1.65-1.35-3-3-3H7C5.35,3,4,4.35,4,6v1.14C5.72,7.59,7,9.14,7,11z\" />\n\t\t<path d=\"M21,9c-1.1,0-2,0.9-2,2v4H5v-4c0-1.1-0.9-2-2-2s-2,0.9-2,2v5c0,1.65,1.35,3,3,3v1c0,0.55,0.45,1,1,1c0.55,0,1-0.45,1-1v-1 h12v1c0,0.55,0.45,1,1,1c0.55,0,1-0.45,1-1v-1c1.65,0,3-1.35,3-3v-5C23,9.9,22.1,9,21,9z\" />\n\t</SVG>\n);\n\nexport const MediaLinkIcon = () => (\n\t<SVG\n\t\txmlns=\"https://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 24 24\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t>\n\t\t<Path d=\"M8 11h8v2H8zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1zM3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3z\" />\n\t</SVG>\n);\n\nexport const withScale = createHigherOrderComponent(\n\t( Icon ) => ( props ) => {\n\t\tif ( ! props?.scale || props.scale === 1 ) {\n\t\t\treturn <Icon { ...props } />;\n\t\t}\n\n\t\treturn (\n\t\t\t<Icon\n\t\t\t\t{ ...props }\n\t\t\t\twidth={ 24 * props.scale }\n\t\t\t\theight={ 24 * props.scale }\n\t\t\t/>\n\t\t);\n\t},\n\t'withIconScale'\n);\n\nexport const PlayerPlayIcon = withScale( () => (\n\t<SVG\n\t\tclassName=\"player-play-icon\"\n\t\txmlns=\"https://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<Path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z\" />\n\t</SVG>\n) );\n\nexport const PlayerPauseIcon = withScale( () => (\n\t<SVG\n\t\tclassName=\"player-pause-icon\"\n\t\txmlns=\"https://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<Path d=\"M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M11,16H9V8h2V16z M15,16h-2V8h2V16z\" />\n\t</SVG>\n) );\n\nexport const ControlForwardFiveIcon = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12.7049 2V6C8.30658 6 4.74414 9.58 4.74414 14C4.74414 18.42 8.30658 22 12.7049 22C17.1032 22 20.6656 18.42 20.6656 14H18.6755C18.6755 17.31 15.9987 20 12.7049 20C9.41113 20 6.73433 17.31 6.73433 14C6.73433 10.69 9.41113 8 12.7049 8V12L17.6804 7L12.7049 2ZM11.6501 12.73L11.4013 14.9L12.068 15.06C12.0753 15.0526 12.0827 15.0447 12.0901 15.0366C12.1131 15.0116 12.1375 14.9851 12.1675 14.97C12.1874 14.96 12.2073 14.9475 12.2272 14.935C12.2471 14.9225 12.2671 14.91 12.287 14.9C12.3268 14.88 12.3865 14.86 12.4362 14.85C12.486 14.84 12.5556 14.83 12.6352 14.83C12.7447 14.83 12.8542 14.85 12.9338 14.88C13.0134 14.91 13.083 14.96 13.1427 15.03C13.2024 15.1 13.2422 15.17 13.2721 15.27C13.302 15.37 13.3119 15.47 13.3119 15.58V15.58C13.3119 15.69 13.3119 15.79 13.2821 15.89C13.2522 15.99 13.2124 16.07 13.1726 16.14C13.1328 16.21 13.0631 16.27 12.9935 16.31C12.9238 16.35 12.8343 16.37 12.7248 16.37C12.5556 16.37 12.4163 16.31 12.3069 16.22C12.1974 16.13 12.1377 15.99 12.1178 15.81H11.2819C11.2819 16.01 11.3317 16.19 11.4113 16.34C11.4909 16.49 11.5904 16.63 11.7297 16.73C11.869 16.83 12.0183 16.92 12.1874 16.97C12.3566 17.02 12.5357 17.05 12.7148 17.05C12.9636 17.05 13.1726 17 13.3517 16.93C13.5308 16.86 13.6801 16.75 13.7995 16.62C13.9189 16.49 14.0085 16.34 14.0682 16.17C14.1279 16 14.1577 15.82 14.1577 15.63C14.1577 15.41 14.1179 15.21 14.0682 15.03C14.0184 14.85 13.9289 14.7 13.8194 14.58C13.7099 14.46 13.5706 14.37 13.4114 14.3C13.2522 14.23 13.0731 14.2 12.8641 14.2C12.7945 14.2 12.7248 14.21 12.6651 14.22C12.6352 14.225 12.6054 14.2325 12.5755 14.24C12.5457 14.2475 12.5158 14.255 12.486 14.26C12.4263 14.27 12.3765 14.29 12.3367 14.31C12.3201 14.3183 12.3035 14.325 12.2876 14.3313C12.2654 14.3401 12.2446 14.3483 12.2272 14.36L12.3367 13.44H14.0284V12.73H11.6501Z\" />\n\t</SVG>\n);\n\nexport const ControlBackFiveIcon = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11.9412 2V6C16.3395 6 19.902 9.58 19.902 14C19.902 18.42 16.3395 22 11.9412 22C7.54291 22 3.98047 18.42 3.98047 14H5.97066C5.97066 17.31 8.64746 20 11.9412 20C15.235 20 17.9118 17.31 17.9118 14C17.9118 10.69 15.235 8 11.9412 8V12L6.96575 7L11.9412 2ZM10.8864 12.73L10.6376 14.9L11.3044 15.06C11.3117 15.0526 11.319 15.0447 11.3264 15.0366C11.3494 15.0116 11.3738 14.9851 11.4039 14.97C11.4238 14.96 11.4437 14.9475 11.4636 14.935C11.4835 14.9225 11.5034 14.91 11.5233 14.9C11.5631 14.88 11.6228 14.86 11.6725 14.85C11.7223 14.84 11.792 14.83 11.8716 14.83C11.981 14.83 12.0905 14.85 12.1701 14.88C12.2497 14.91 12.3194 14.96 12.3791 15.03C12.4388 15.1 12.4786 15.17 12.5084 15.27C12.5383 15.37 12.5482 15.47 12.5482 15.58V15.58C12.5482 15.69 12.5482 15.79 12.5184 15.89C12.4885 15.99 12.4487 16.07 12.4089 16.14C12.3691 16.21 12.2995 16.27 12.2298 16.31C12.1601 16.35 12.0706 16.37 11.9611 16.37C11.792 16.37 11.6526 16.31 11.5432 16.22C11.4337 16.13 11.374 15.99 11.3541 15.81H10.5182C10.5182 16.01 10.568 16.19 10.6476 16.34C10.7272 16.49 10.8267 16.63 10.966 16.73C11.1053 16.83 11.2546 16.92 11.4238 16.97C11.5929 17.02 11.7721 17.05 11.9512 17.05C12.1999 17.05 12.4089 17 12.588 16.93C12.7672 16.86 12.9164 16.75 13.0358 16.62C13.1552 16.49 13.2448 16.34 13.3045 16.17C13.3642 16 13.3941 15.82 13.3941 15.63C13.3941 15.41 13.3543 15.21 13.3045 15.03C13.2547 14.85 13.1652 14.7 13.0557 14.58C12.9463 14.46 12.807 14.37 12.6477 14.3C12.4885 14.23 12.3094 14.2 12.1004 14.2C12.0308 14.2 11.9611 14.21 11.9014 14.22C11.8716 14.225 11.8417 14.2325 11.8119 14.24C11.782 14.2475 11.7522 14.255 11.7223 14.26C11.6626 14.27 11.6128 14.29 11.573 14.31C11.5564 14.3183 11.5398 14.325 11.5239 14.3313C11.5017 14.3401 11.481 14.3483 11.4636 14.36L11.573 13.44H13.2647V12.73H10.8864Z\" />\n\t</SVG>\n);\n\nexport const PlayerPlayPauseIcon = withScale( () => (\n\t<SVG\n\t\tclassName=\"player-play-pause-icon\"\n\t\txmlns=\"https://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<Path d=\"M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M11,16H9V8h2V16z M12,16V8l5,4L12,16z\" />\n\t</SVG>\n) );\n\nexport const PlayerIcon = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M3.24 6.15C2.51 6.43 2 7.17 2 8v12c0 1.1.89 2 2 2h16c1.11 0 2-.9 2-2V8c0-1.11-.89-2-2-2H8.3l8.26-3.34L15.88 1 3.24 6.15zM7 20c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm13-8h-2v-2h-2v2H4V8h16v4z\" />\n\t</SVG>\n);\n\nexport const TimePositionIcon = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M21,5H3C1.9,5,1,5.9,1,7v10c0,1.1,0.9,2,2,2h18c1.1,0,2-0.9,2-2V7C23,5.9,22.1,5,21,5z M18,17H6V7h12V17z\" />\n\t</SVG>\n);\n\nexport const MediaConnectIcon = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M0 0h24v24H0z\" fill=\"none\" />\n\t\t<Path d=\"M22 12l-4 4-1.41-1.41L18.17 13h-5.23c-.34 3.1-2.26 5.72-4.94 7.05C7.96 21.69 6.64 23 5 23c-1.66 0-3-1.34-3-3s1.34-3 3-3c.95 0 1.78.45 2.33 1.14 1.9-1.03 3.26-2.91 3.58-5.14h-3.1C7.4 14.16 6.3 15 5 15c-1.66 0-3-1.34-3-3s1.34-3 3-3c1.3 0 2.4.84 2.82 2h3.1c-.32-2.23-1.69-4.1-3.59-5.14C6.78 6.55 5.95 7 5 7 3.34 7 2 5.66 2 4s1.34-3 3-3c1.64 0 2.96 1.31 2.99 2.95 2.68 1.33 4.6 3.95 4.94 7.05h5.23l-1.58-1.59L18 8l4 4z\" />\n\t</SVG>\n);\n","/**\n * Internal dependencies\n */\nexport * from './icons';\nexport * from './media-player';\n","/**\n * External dependencies\n */\nimport { debounce } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useEffect, useCallback } from '@wordpress/element';\nimport { RangeControl, Notice, Button } from '@wordpress/components';\nimport { useMediaStore } from '@media-manager/media-connect';\nimport { convertSecondsToTimeCode } from '@media-manager/time-utils';\n\n/**\n * Internal dependencies\n */\nimport {\n\tControlBackFiveIcon,\n\tControlForwardFiveIcon,\n\tPlayerPlayIcon,\n\tPlayerPauseIcon,\n\tPlayerPlayPauseIcon,\n} from '../icons';\n\nexport function JumpBackButton( { onClick, ...other } ) {\n\treturn (\n\t\t<Button\n\t\t\ticon={ ControlBackFiveIcon }\n\t\t\tonClick={ onClick }\n\t\t\tlabel={ __( 'Jump back', 'media-manager' ) }\n\t\t\t{ ...other }\n\t\t/>\n\t);\n}\n\nexport function PlayPauseButton( {\n\tonClick,\n\tisPaused = false,\n\tscale,\n\t...other\n} ) {\n\treturn (\n\t\t<Button\n\t\t\ticon={\n\t\t\t\tisPaused ? (\n\t\t\t\t\t<PlayerPlayPauseIcon scale={ scale } />\n\t\t\t\t) : (\n\t\t\t\t\t<PlayerPauseIcon scale={ scale } />\n\t\t\t\t)\n\t\t\t}\n\t\t\tdisabled={ false }\n\t\t\tonClick={ onClick }\n\t\t\tlabel={\n\t\t\t\tisPaused\n\t\t\t\t\t? __( 'Play', 'media-manager' )\n\t\t\t\t\t: __( 'Pause', 'media-manager' )\n\t\t\t}\n\t\t\t{ ...other }\n\t\t/>\n\t);\n}\n\nexport function PlayButton( { onClick, scale, ...other } ) {\n\treturn (\n\t\t<Button\n\t\t\ticon={ <PlayerPlayIcon scale={ scale } /> }\n\t\t\tonClick={ onClick }\n\t\t\tlabel={ __( 'Play', 'media-manager' ) }\n\t\t\t{ ...other }\n\t\t/>\n\t);\n}\n\nexport function PauseButton( { onClick, scale, ...other } ) {\n\treturn (\n\t\t<Button\n\t\t\ticon={ <PlayerPauseIcon scale={ scale } /> }\n\t\t\tonClick={ onClick }\n\t\t\tlabel={ __( 'Pause', 'media-manager' ) }\n\t\t\t{ ...other }\n\t\t/>\n\t);\n}\n\nexport function SkipForwardButton( { onClick, ...other } ) {\n\treturn (\n\t\t<Button\n\t\t\ticon={ ControlForwardFiveIcon }\n\t\t\tonClick={ onClick }\n\t\t\tlabel={ __( 'Skip forward', 'media-manager' ) }\n\t\t\t{ ...other }\n\t\t/>\n\t);\n}\n\nexport function MediaPlayerControl( {\n\tmediaSourceId,\n\ttime,\n\tonChange = () => {},\n} ) {\n\tconst [ rangeTime, setRangeTime ] = useState( time );\n\tuseEffect( () => setRangeTime( time ), [ time ] );\n\tconst { isPaused, isReady, duration, toggle, setCurrentTime } = useMediaStore( mediaSourceId );\n\n\tconst debouncedOnChange = useCallback(\n\t\tdebounce( function( debTime, debOnChange ) {\n\t\t\tif ( ! isPaused ) {\n\t\t\t\tsetCurrentTime( debTime );\n\t\t\t}\n\n\t\t\tdebOnChange( debTime );\n\t\t}, 250 ),\n\t\t[ isPaused ]\n\t);\n\n\t/**\n\t * Toggle media playing status.\n\t * Set current position when not playing.\n\t */\n\tfunction toggleInTime() {\n\t\tif ( isPaused ) {\n\t\t\tsetCurrentTime( time );\n\t\t}\n\t\ttoggle( mediaSourceId );\n\t}\n\n\tfunction onChangeTimeHandler( newTimeValue ) {\n\t\tsetRangeTime( newTimeValue );\n\t\tdebouncedOnChange( newTimeValue, onChange );\n\t}\n\n\tconst currentTimeFormatted = convertSecondsToTimeCode( rangeTime );\n\n\treturn (\n\t\t<div className=\"media-player-control\">\n\t\t\t{ ! isReady && (\n\t\t\t\t<Notice\n\t\t\t\t\tspokenMessage={ null }\n\t\t\t\t\tstatus=\"warning\"\n\t\t\t\t\tisDismissible={ false }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'No media linked to this block', 'context' ) }\n\t\t\t\t</Notice>\n\t\t\t) }\n\n\t\t\t<JumpBackButton\n\t\t\t\tdisabled={ ! isReady }\n\t\t\t\tonClick={ () => onChangeTimeHandler( Math.max( 0, time - 5 ) ) }\n\t\t\t/>\n\n\t\t\t<PlayPauseButton\n\t\t\t\tisPaused={ isPaused }\n\t\t\t\tdisabled={ ! isReady }\n\t\t\t\tonClick={ () => toggleInTime() }\n\t\t\t/>\n\n\t\t\t<SkipForwardButton\n\t\t\t\tdisabled={ ! isReady }\n\t\t\t\tonClick={ () => onChangeTimeHandler( Math.min( duration, time + 5 ) ) }\n\t\t\t/>\n\n\t\t\t<div className=\"media-player-control__display\">\n\t\t\t\t{ currentTimeFormatted }\n\t\t\t</div>\n\n\t\t\t<RangeControl\n\t\t\t\tdisabled={ ! isReady }\n\t\t\t\tvalue={ rangeTime }\n\t\t\t\tmin={ 0 }\n\t\t\t\tmax={ duration }\n\t\t\t\tonChange={ onChangeTimeHandler }\n\t\t\t\twithInputField={ false }\n\t\t\t\tshowTooltip={ false }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","// Store ID\nexport const STORE_NAME = 'media-manager/media-source';\n\n// Media statuses\nexport const STATE_PLAYING = 'is-playing';\nexport const STATE_ERROR = 'is-error';\nexport const STATE_PAUSED = 'is-paused';\nexport const MEDIA_NOT_DEFINED = 'media-not-defined-yet';\n","/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { convertSecondsToTimeCode } from '@media-manager/time-utils';\n\n/**\n * Internal dependencies\n */\nimport { store as mediaManagerStore } from '../../';\n\nexport default function useCurrentTime( id ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst currentTime =\n\t\t\t\tselect( mediaManagerStore ).getMediaSourceCurrentTime( id ) ||\n\t\t\t\t0;\n\t\t\treturn {\n\t\t\t\tcurrentTime,\n\t\t\t\tcurrentTimeFormatted: convertSecondsToTimeCode( currentTime ),\n\t\t\t};\n\t\t},\n\t\t[ id ]\n\t);\n}\n","/**\n * This hook picks up the media source,\n * at block level, by the following priorities:\n *\n * - block attribute.\n * - block context.\n * - default value in the store admin\n *\n * @param {string} attrName - Attribute name where the source id is stored.\n * @param {Object} props - Block properties.\n * @return {string|null} Media source id when it's defined. Otherwise, null.\n */\nexport default function useMediaSourceId( attrName, props ) {\n\tconst { attributes, context } = props;\n\n\t// Pick up media source ID from attributes.\n\tif ( attributes?.[ attrName ] ) {\n\t\treturn attributes[ attrName ];\n\t}\n\n\t// Pick up media source ID from context;\n\tif ( context?.mediaSourceId ) {\n\t\treturn context.mediaSourceId;\n\t}\n}\n","/**\n * External dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as mediaManagerStore } from '../../';\nimport { STATE_NOT_READY, STATE_PAUSED } from '../../store/constants';\n\n/**\n * Media Store hook that provides properties and helper functions\n * to get useful data as well as be able to control the media.\n *\n * @param {string} id Media store ID.\n * @return {Object} Media store object, with properties and helpers.\n */\nexport default function useMediaStore( id ) {\n\tconst { isPaused, isReady, playingState, duration } = useSelect(\n\t\tfunction( select ) {\n\t\t\tconst state = select( mediaManagerStore ).getMediaPlayerState( id );\n\t\t\treturn {\n\t\t\t\tplayingState: state,\n\t\t\t\tisReady: typeof state !== STATE_NOT_READY,\n\t\t\t\tisPaused:\n\t\t\t\t\ttypeof state === 'undefined' ||\n\t\t\t\t\tstate === STATE_PAUSED,\n\t\t\t\tduration: select( mediaManagerStore ).getMediaSourceDuration( id ),\n\t\t\t};\n\t\t},\n\t\t[ id ]\n\t);\n\n\tconst {\n\t\tplayMediaSource,\n\t\tpauseMediaSource,\n\t\ttoggleMediaSource,\n\t\tsetMediaSourceCurrentTime,\n\t\tregisterMediaSource,\n\t\tunregisterMediaSource,\n\t\tupdateMediaSourceData,\n\t} = useDispatch( mediaManagerStore );\n\n\treturn {\n\t\tclassName: isPaused ? 'is-media-paused' : '', // @Todo: Considering remove this className prp.\n\t\tplayingState,\n\t\tisPaused,\n\t\tisReady,\n\t\tduration,\n\t\tplay: useCallback( () => playMediaSource( id ), [ id ] ),\n\t\tpause: useCallback( () => pauseMediaSource( id ), [ id ] ),\n\t\ttoggle: useCallback( () => toggleMediaSource( id ), [ id ] ),\n\t\tregister: useCallback(\n\t\t\t( storeId, data ) => registerMediaSource( storeId, data ),\n\t\t\t[ id ]\n\t\t),\n\t\tunregister: useCallback(\n\t\t\t( mediaSourceId ) => unregisterMediaSource( mediaSourceId ),\n\t\t\t[]\n\t\t),\n\t\tupdateData: useCallback(\n\t\t\t( mediaSourceI, data ) =>\n\t\t\t\tupdateMediaSourceData( mediaSourceI, data ),\n\t\t\t[]\n\t\t),\n\t\tsetCurrentTime: useCallback(\n\t\t\t( timestamp ) => setMediaSourceCurrentTime( id, timestamp ),\n\t\t\t[ id ]\n\t\t),\n\t};\n}\n","export { store } from './store';\nexport {\n\tSTATE_PLAYING,\n\tSTATE_PAUSED,\n\tSTATE_ERROR,\n\tMEDIA_NOT_DEFINED,\n} from './constants';\nexport { default as useMediaStore } from './hooks/use-media-store';\nexport { default as useMediaSourceId } from './hooks/use-media-source-id';\nexport { default as useCurrentTime } from './hooks/use-current-time';\n","/**\n * Internal dependencies\n */\nimport { STATE_PLAYING, STATE_PAUSED, STATE_ERROR } from './constants';\n\nexport function registerMediaSource( id, mediaSourceState ) {\n\treturn {\n\t\ttype: 'REGISTER_MEDIA_SOURCE',\n\t\tid,\n\t\tmediaSourceState,\n\t};\n}\n\nexport function updateMediaSourceData( id, data ) {\n\treturn {\n\t\ttype: 'UPDATE_MEDIA_SOURCE_DATA',\n\t\tid,\n\t\tdata,\n\t};\n}\n\nexport function unregisterMediaSource( id ) {\n\treturn {\n\t\ttype: 'UNREGISTER_MEDIA_SOURCE',\n\t\tid,\n\t};\n}\n\nexport function setDefaultMediaSource( id ) {\n\treturn {\n\t\ttype: 'SET_DEFAULT_MEDIA_SOURCE',\n\t\tid,\n\t};\n}\n\nexport function playMediaSource( id ) {\n\treturn {\n\t\ttype: 'SET_MEDIA_PLAYER_STATE',\n\t\tid,\n\t\tstate: STATE_PLAYING,\n\t};\n}\n\nexport function toggleMediaSource( id ) {\n\treturn {\n\t\ttype: 'TOGGLE_MEDIA_PLAYER_STATE',\n\t\tid,\n\t};\n}\n\nexport function pauseMediaSource( id ) {\n\treturn {\n\t\ttype: 'SET_MEDIA_PLAYER_STATE',\n\t\tid,\n\t\tstate: STATE_PAUSED,\n\t};\n}\n\nexport function errorMediaSource( id ) {\n\treturn {\n\t\ttype: 'SET_MEDIA_PLAYER_STATE',\n\t\tid,\n\t\tstate: STATE_ERROR,\n\t};\n}\n\nexport function setMediaSourceCurrentTime( id, currentTime ) {\n\treturn {\n\t\ttype: 'SET_MEDIA_PLAYER_CURRENT_TIME',\n\t\tid,\n\t\tcurrentTime,\n\t};\n}\n","// Store ID\nexport const STORE_NAME = 'media-manager/media-source';\n\n// Media statuses.\nexport const STATE_NOT_READY = 'is-not-ready';\nexport const STATE_PLAYING = 'is-playing';\nexport const STATE_ERROR = 'is-error';\nexport const STATE_PAUSED = 'is-paused';\nexport const MEDIA_NOT_DEFINED = 'media-not-defined-yet';\n\nexport const DEFAULT_STATE = {\n\tsources: {},\n\tdefault: null,\n};\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, register } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as actions from './actions';\nimport * as selectors from './selectors';\n\nimport { STORE_NAME } from './constants';\n\n/**\n * Store definition for the meida source namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n *\n * @type {Object}\n */\nexport const store = createReduxStore( STORE_NAME, {\n\treducer,\n\tactions,\n\tselectors,\n} );\n\nregister( store );\n","/**\n * Internal dependencies\n */\nimport {\n\tDEFAULT_STATE,\n\tMEDIA_NOT_DEFINED,\n\tSTATE_PLAYING,\n\tSTATE_PAUSED,\n} from './constants';\n\nfunction reducer( state = DEFAULT_STATE, action ) {\n\t// Some actions doesn't have defined the source ID\n\t// On this case, we try to get safe getting the default ID.\n\t// Othewise, it will try to pick the first fro the souces list.\n\tconst actionId =\n\t\taction.id || state.default || Object.keys( state.sources )?.[ 0 ];\n\n\t// Do not register when it sets explicitely as not defined.\n\tif ( actionId === MEDIA_NOT_DEFINED ) {\n\t\treturn state;\n\t}\n\n\tswitch ( action.type ) {\n\t\tcase 'REGISTER_MEDIA_SOURCE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsources: {\n\t\t\t\t\t...state.sources,\n\t\t\t\t\t[ action.id ]: {\n\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t...action.mediaSourceState,\n\t\t\t\t\t\tstate: action.mediaSourceState.state ?? STATE_PAUSED,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_MEDIA_SOURCE_DATA': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsources: {\n\t\t\t\t\t...state.sources,\n\t\t\t\t\t[ action.id ]: {\n\t\t\t\t\t\t...state.sources[ action.id ],\n\t\t\t\t\t\t...action.data,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'UNREGISTER_MEDIA_SOURCE': {\n\t\t\tconst currentState = Object.assign( {}, state );\n\t\t\tif ( currentState.sources[ action.id ] ) {\n\t\t\t\tdelete currentState.sources[ action.id ];\n\t\t\t}\n\n\t\t\t// Set the first source as default\n\t\t\t// if it's removing it.\n\t\t\tif ( action.id === state.default ) {\n\t\t\t\tcurrentState.default = Object.keys( state.sources )?.[ 0 ];\n\t\t\t}\n\n\t\t\treturn currentState;\n\t\t}\n\n\t\tcase 'SET_DEFAULT_MEDIA_SOURCE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdefault: action.id,\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_MEDIA_PLAYER_STATE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsources: {\n\t\t\t\t\t...state.sources,\n\t\t\t\t\t[ actionId ]: {\n\t\t\t\t\t\t...state.sources[ actionId ],\n\t\t\t\t\t\tstate: action.state,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'TOGGLE_MEDIA_PLAYER_STATE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsources: {\n\t\t\t\t\t...state.sources,\n\t\t\t\t\t[ actionId ]: {\n\t\t\t\t\t\t...state.sources[ actionId ],\n\t\t\t\t\t\tstate:\n\t\t\t\t\t\t\tstate.sources[ actionId ].state === STATE_PLAYING\n\t\t\t\t\t\t\t\t? STATE_PAUSED\n\t\t\t\t\t\t\t\t: STATE_PLAYING,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_MEDIA_PLAYER_CURRENT_TIME': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsources: {\n\t\t\t\t\t...state.sources,\n\t\t\t\t\t[ actionId ]: {\n\t\t\t\t\t\t...state.sources[ actionId ],\n\t\t\t\t\t\tcurrentTime: action.currentTime,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\n\treturn state;\n}\n\nexport default reducer;\n","/**\n * Internal dependencies\n */\nimport { MEDIA_NOT_DEFINED, STATE_NOT_READY } from './constants';\n\nexport function getMediaSources( state ) {\n\treturn state.sources;\n}\n\nexport function getMediaSourceById( state, id ) {\n\tif ( id === MEDIA_NOT_DEFINED ) {\n\t\treturn;\n\t}\n\treturn state.sources?.[ id ];\n}\n\n/**\n * Retunr the default media source.\n * - the default one in case it's defined.\n * - the first one in case there are sources defined\n * - null when no media sources :-o\n *\n * @param {Object} state\n * @return {string|null} default media source ID.\n */\nexport function getDefaultMediaSource( state ) {\n\tlet playerId = null;\n\tconst keys = Object.keys( state.sources );\n\n\tif ( state.default ) {\n\t\tplayerId = state.default;\n\t} else if ( keys?.length ) {\n\t\tplayerId = state.sources[ keys[ 0 ] ].id;\n\t}\n\n\tif ( ! playerId ) {\n\t\treturn;\n\t}\n\n\treturn state.sources[ playerId ];\n}\n\nexport function getMediaPlayerState( state, id ) {\n\tconst defaultMediaSource = id\n\t\t? state.sources?.[ id ]\n\t\t: getDefaultMediaSource( state );\n\n\tif ( ! defaultMediaSource?.state ) {\n\t\treturn STATE_NOT_READY;\n\t}\n\n\treturn defaultMediaSource.state;\n}\n\nexport function getMediaSourceCurrentTime( state, id ) {\n\tconst defaultMediaSource = id\n\t\t? state.sources?.[ id ]\n\t\t: getDefaultMediaSource( state );\n\n\treturn defaultMediaSource?.currentTime;\n}\n\nexport function getMediaSourceDuration( state, id ) {\n\tif ( ! id ) {\n\t\tconst defaultMediaSource = getDefaultMediaSource( state );\n\t\treturn defaultMediaSource?.duration;\n\t}\n\n\treturn state.sources?.[ id ]?.duration;\n}\n\nexport function getMediaSourceDomReference( state, id ) {\n\tconst mediaSource = id\n\t\t? state.sources?.[ id ]\n\t\t: getDefaultMediaSource( state );\n\n\tif ( ! mediaSource ) {\n\t\treturn;\n\t}\n\n\tif ( ! mediaSource?.querySelector ) {\n\t\treturn;\n\t}\n\n\treturn document.querySelector( mediaSource.querySelector );\n}\n","export const timecodeRegExp = new RegExp(\n\t/^(?:(?:([01]?\\d|2[0-3]):)?([0-5]?\\d):)?([0-5]?\\d)$/\n);\n\nconst multiple = /(?:(?:([01]?\\d|2[0-3]):)?([0-5]?\\d):)?([0-5]?\\d)/;\nconst singleTimecodeRegExp = new RegExp( multiple, 'g' );\nconst multipleTimecodeRegExp = new RegExp( multiple, 'gm' );\n\nconst markdownTimeformat = /\\[((?:(?:(?:[01]?\\d|2[0-3]:):)?[0-5]?\\d:)?[0-5]?\\d)\\](?:\\(([^\\(\\)]+)\\))?.$/;\nconst markdownTimeformatRegExp = new RegExp( markdownTimeformat );\n\nexport function convertSecondsToTimeCode( seconds ) {\n\tif ( ! seconds ) {\n\t\treturn '00:00:00';\n\t}\n\treturn new Date( seconds * 1000 ).toISOString().substr( 11, 8 );\n}\n\nexport const convertTimeCodeToSeconds = ( string ) => {\n\tif ( ! isTimeformat( string ) ) {\n\t\treturn;\n\t}\n\tconst parts = string.match( timecodeRegExp );\n\tif ( ! parts ) {\n\t\treturn;\n\t}\n\n\t// seconds.\n\tlet time = Number( parts[ 3 ] );\n\n\t// minutes.\n\tif ( parts[ 2 ] ) {\n\t\ttime += Number( parts[ 2 ] ) * 60;\n\t}\n\n\t// hours.\n\tif ( parts[ 1 ] ) {\n\t\ttime += Number( parts[ 1 ] ) * 60 * 60;\n\t}\n\n\treturn time;\n};\n\nexport const isTimeformat = ( value ) => timecodeRegExp.test( value );\n\nexport const isMarkdownTimeformat = ( value ) =>\n\tmarkdownTimeformatRegExp.exec( value );\n\nexport const hasMultipleTimeformats = ( value ) =>\n\tvalue.match( multipleTimecodeRegExp );\n\nexport const getTimeformatMatch = ( value ) =>\n\tsingleTimecodeRegExp.exec( value );\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useMediaStore } from '@media-manager/media-connect';\nimport { PlayerPauseIcon } from '@media-manager/components';\n\nexport default function PauseBlock( { mediaSourceId } ) {\n\tconst { pause, className } = useMediaStore( mediaSourceId );\n\n\treturn (\n\t\t<Button\n\t\t\tclassName={ `wp-media-manager-player-button__button ${ className }` }\n\t\t\ticon={ <PlayerPauseIcon /> }\n\t\t\tonClick={ pause }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useMediaStore } from '@media-manager/media-connect';\nimport { PlayerPlayIcon } from '@media-manager/components';\n\nexport default function PlayBlock( { mediaSourceId } ) {\n\tconst { play, className } = useMediaStore( mediaSourceId );\n\n\treturn (\n\t\t<Button\n\t\t\tclassName={ `wp-media-manager-player-button__button ${ className }` }\n\t\t\ticon={ <PlayerPlayIcon /> }\n\t\t\tonClick={ play }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useMediaStore } from '@media-manager/media-connect';\nimport { PlayerPauseIcon, PlayerPlayPauseIcon } from '@media-manager/components';\n\nexport default function PlayPauseBlock( { mediaSourceId } ) {\n\tconst { isPaused, toggle, className } = useMediaStore( mediaSourceId );\n\n\treturn (\n\t\t<Button\n\t\t\tclassName={ `wp-media-manager-player-button__button ${ className }` }\n\t\t\ticon={ isPaused ? <PlayerPlayPauseIcon /> : <PlayerPauseIcon /> }\n\t\t\tonClick={ toggle }\n\t\t/>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport { useCurrentTime } from '@media-manager/media-connect';\n\nexport default function TimePositionDisplayEditBlock( { mediaSourceId } ) {\n\tconst { currentTimeFormatted } = useCurrentTime( mediaSourceId );\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"time-position-display__wrapper\">\n\t\t\t\t{ currentTimeFormatted }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport './play-pause-button/view';\n","const BLOCK_NAME_CORE_VIDEO = 'core/video';\nconst BLOCK_NAME_CORE_AUDIO = 'core/audio';\nconst BLOCK_NAME_CORE_PARAGRAPH = 'core/paragraph';\nconst BLOCK_NAME_CORE_HEADING = 'core/heading';\nconst BLOCK_NAME_CORE_QUOTE = 'core/quote';\nconst BLOCK_NAME_CORE_LIST = 'core/list';\n\n/*\n * Blocks list that are going to be extended\n * as media source providers\n */\nexport const EXTENDED_MEDIA_BLOCKS = [\n\tBLOCK_NAME_CORE_AUDIO,\n\tBLOCK_NAME_CORE_VIDEO,\n];\n\n/*\n * The following object defines the attribute schema\n * for each block that will be extended.\n *\n * - name: Block attribute name used to store the media source.\n * - type: Attribute type.\n * - domTymeName: DOM element name.\n */\nexport const MEDIA_BLOCKS_ATTRIBUTE_SCHEMA = {\n\t[ BLOCK_NAME_CORE_VIDEO ]: {\n\t\tname: 'src',\n\t\ttype: 'string',\n\t\tdomTypeName: 'video',\n\t},\n\n\t[ BLOCK_NAME_CORE_AUDIO ]: {\n\t\tname: 'src',\n\t\ttype: 'string',\n\t\tdomTypeName: 'audio',\n\t},\n};\n\nexport const EXTEND_BLOCKS_WITH_MEDIA = [\n\tBLOCK_NAME_CORE_PARAGRAPH,\n\tBLOCK_NAME_CORE_HEADING,\n\tBLOCK_NAME_CORE_QUOTE,\n\tBLOCK_NAME_CORE_LIST,\n];\n","/**\n * External dependencies\n */\nimport { debounce, throttle } from 'lodash';\n\n/**\n * External dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\nimport {\n\tstore as mediaManagerStore,\n\tSTATE_PAUSED,\n\tuseMediaStore,\n} from '@media-manager/media-connect';\n\nconst MEDIA_CURRENT_TIME_THRESHOLD = 1000;\nconst MEDIA_CURRENT_STATE_THRESHOLD = 1000;\n\nexport default function MediaSourceProviderWrapper( {\n\tmediaElement,\n\tmediaSourceId,\n\telementType,\n\tquerySelector,\n} ) {\n\tconst {\n\t\tisPaused,\n\t\tsetCurrentTime,\n\t\tplay: playMedia,\n\t\tpause: pauseMedia,\n\t\tregister,\n\t\tunregister,\n\t\tupdateData,\n\t} = useMediaStore( mediaSourceId );\n\n\tconst currentTime = useSelect(\n\t\t( select ) =>\n\t\t\tselect( mediaManagerStore ).getMediaSourceCurrentTime(\n\t\t\t\tmediaSourceId\n\t\t\t),\n\t\t[ mediaSourceId ]\n\t);\n\n\tfunction play() {\n\t\tmediaElement.play().catch( () => {} );\n\t}\n\n\tfunction pause() {\n\t\tmediaElement.pause();\n\t}\n\n\tfunction onMetadataReady( event ) {\n\t\tupdateData( mediaSourceId, {\n\t\t\tduration: event?.srcElement?.duration,\n\t\t} );\n\t}\n\n\t/*\n\t * Pre load mediaElement metadata.\n\t * It allows preloading useful metadata\n\t * of the media source, for instance,\n\t * the media duration.\n\t */\n\tmediaElement.preload = 'metadata';\n\tmediaElement.autoplay = false;\n\n\t/*\n\t * - Register Media into the store.\n\t * - Get the metadata from the client.\n\t * - Listen Play and Pause events.\n\t */\n\tuseEffect( () => {\n\t\tregister( mediaSourceId, {\n\t\t\t// source: mediaSource,\n\t\t\telementType,\n\t\t\tstate: STATE_PAUSED,\n\t\t\tquerySelector,\n\t\t} );\n\n\t\t// Subscribe to media events.\n\t\tmediaElement.addEventListener( 'loadedmetadata', onMetadataReady );\n\t\tmediaElement.addEventListener( 'play', playMedia );\n\t\tmediaElement.addEventListener( 'pause', pauseMedia );\n\n\t\t// Clean.\n\t\treturn function() {\n\t\t\t// Remove listeners.\n\t\t\tmediaElement.removeEventListener(\n\t\t\t\t'loadedmetadata',\n\t\t\t\tonMetadataReady\n\t\t\t);\n\t\t\tmediaElement.removeEventListener( 'play', playMedia );\n\t\t\tmediaElement.removeEventListener( 'pause', pauseMedia );\n\n\t\t\t// Unregister media from store.\n\t\t\tunregister( mediaSourceId );\n\t\t};\n\t}, [] );\n\n\t// Play/Pause media depending on isPaused status (via store).\n\tuseEffect( () => {\n\t\tconst action = mediaElement.paused ? play : pause;\n\t\tconst debouncedAction = debounce( action, 100 );\n\n\t\tif ( isPaused !== mediaElement.paused ) {\n\t\t\tdebouncedAction();\n\t\t}\n\n\t\treturn () => {\n\t\t\tdebouncedAction.cancel();\n\t\t};\n\t}, [ isPaused, mediaElement ] );\n\n\t/*\n\t * Handling current time state,\n\t * updating its status in the store,\n\t * listening the `timeupdate` element event.\n\t */\n\n\tuseEffect( () => {\n\t\tconst throttledTimeChange = throttle(\n\t\t\t( time ) => setCurrentTime( time ),\n\t\t\tMEDIA_CURRENT_TIME_THRESHOLD,\n\t\t\t{\n\t\t\t\tleading: true,\n\t\t\t\ttrailing: false,\n\t\t\t}\n\t\t);\n\n\t\tconst onTimeUpdate = ( e ) =>\n\t\t\tthrottledTimeChange( e.target.currentTime );\n\t\tmediaElement.addEventListener( 'timeupdate', onTimeUpdate );\n\n\t\treturn () => {\n\t\t\tthrottledTimeChange.cancel();\n\t\t\tmediaElement.removeEventListener( 'timeupdate', onTimeUpdate );\n\t\t};\n\t}, [ mediaElement, setCurrentTime ] );\n\n\t/*\n\t * Change the playing state of the media,\n\t * depending on the current time\n\t * defined in the store.\n\t */\n\tuseEffect( () => {\n\t\tif ( typeof currentTime !== 'number' || ! mediaElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*\n\t\t * Update the current time when difference between\n\t\t * the media element and the state is bigger than\n\t\t * the threshold  MEDIA_CURRENT_TIME_THRESHOLD.\n\t\t */\n\t\tif (\n\t\t\tMath.abs(\n\t\t\t\tMath.floor( currentTime - mediaElement.currentTime ) * 1000\n\t\t\t) > MEDIA_CURRENT_STATE_THRESHOLD\n\t\t) {\n\t\t\tmediaElement.currentTime = currentTime;\n\t\t}\n\t}, [ mediaElement, currentTime ] );\n\n\treturn null;\n}\n","/**\n * External dependencies\n */\nimport domReady from '@wordpress/dom-ready';\nimport { render } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getBlockSourceProps } from '../utils';\nimport PlayPauseButtonBlock from '../../block-library/play-pause-button/view';\nimport PlayButtonBlock from '../../block-library/play-button/view';\nimport PauseButtonBlock from '../../block-library/pause-button/view';\nimport TimePositionBlock from '../../block-library/time-position/view';\n// import MediaLinkFormatType from '../../components/media-link-format-type/view';\nimport MediaSourceProviderWrapper from './media-source-provider-wrapper';\n\n/**\n * Hlper function to render the Player Button Block, in the front-end.\n *\n * @param {string} mediaSourceId Media source ID\n * @param {elementType} playerButtonElement\n * @returns {React.Component} Media player button\n */\nfunction renderPlayerComponentBlock( mediaSourceId, playerButtonElement ) {\n\tlet PlayerButtonComponent;\n\n\tif (\n\t\tplayerButtonElement.classList.contains(\n\t\t\t'wp-block-media-manager-play-pause-button'\n\t\t)\n\t) {\n\t\tPlayerButtonComponent = PlayPauseButtonBlock;\n\t} else if (\n\t\tplayerButtonElement.classList.contains(\n\t\t\t'wp-block-media-manager-play-button'\n\t\t)\n\t) {\n\t\tPlayerButtonComponent = PlayButtonBlock;\n\t} else if (\n\t\tplayerButtonElement.classList.contains(\n\t\t\t'wp-block-media-manager-pause-button'\n\t\t)\n\t) {\n\t\tPlayerButtonComponent = PauseButtonBlock;\n\t} else {\n\t\tPlayerButtonComponent = TimePositionBlock;\n\t}\n\n\tif ( ! PlayerButtonComponent ) {\n\t\treturn;\n\t}\n\n\trender(\n\t\t<PlayerButtonComponent mediaSourceId={ mediaSourceId } />,\n\t\tplayerButtonElement\n\t);\n}\n\ndomReady( function () {\n\t// Media Providers.\n\tconst mediaElements = document.querySelectorAll( '[data-media-source-id]' );\n\tif ( mediaElements.length ) {\n\t\tmediaElements.forEach( function ( media ) {\n\t\t\tconst { mediaSourceId, mediaSourceType } = media.dataset;\n\t\t\tconst { domTypeName } = getBlockSourceProps( mediaSourceType );\n\t\t\tconst query = `[data-media-source-id=\"${ mediaSourceId }\"] ${ domTypeName }`;\n\t\t\tconst mediaElement = document.querySelector( query );\n\t\t\tif ( mediaElement ) {\n\t\t\t\t// if ( mediaElement && mediaElement.parentElement ) { // Keep wondering why checking parentElement.\n\t\t\t\trender(\n\t\t\t\t\t<MediaSourceProviderWrapper\n\t\t\t\t\t\tmediaSourceId={ mediaSourceId }\n\t\t\t\t\t\telementType={ domTypeName }\n\t\t\t\t\t\tquerySelector={ query }\n\t\t\t\t\t\tmediaElement={ mediaElement }\n\t\t\t\t\t/>,\n\t\t\t\t\tmediaElement\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}\n\n\t// Media Consumers.\n\tconst mediaSourceConsumers = document.querySelectorAll(\n\t\t'[data-media-source-reference]'\n\t);\n\n\t// CSS class defined for the player button blocks.\n\tconst buttonBlockCssClass = 'wp-media-manager-player-button';\n\tconst linkFormatCssClass = 'media-link-format-type';\n\tif ( mediaSourceConsumers?.length ) {\n\t\tmediaSourceConsumers.forEach( function ( mediaCenterBlock ) {\n\t\t\tconst { mediaSourceReference } = mediaCenterBlock?.dataset;\n\n\t\t\t// Check is the consumer is a player-button block\n\t\t\tconst isButtonBlock = mediaCenterBlock.classList.contains(\n\t\t\t\tbuttonBlockCssClass\n\t\t\t);\n\t\t\tif ( isButtonBlock ) {\n\t\t\t\trenderPlayerComponentBlock(\n\t\t\t\t\tmediaSourceReference,\n\t\t\t\t\tmediaCenterBlock\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// Query player button blocks.\n\t\t\t\tconst mediaPlayerButtons = mediaCenterBlock.querySelectorAll(\n\t\t\t\t\t`.${ buttonBlockCssClass }`\n\t\t\t\t);\n\t\t\t\tif ( mediaPlayerButtons?.length ) {\n\t\t\t\t\tmediaPlayerButtons.forEach( function (\n\t\t\t\t\t\tplayerButtonElement\n\t\t\t\t\t) {\n\t\t\t\t\t\trenderPlayerComponentBlock(\n\t\t\t\t\t\t\tmediaSourceReference,\n\t\t\t\t\t\t\tplayerButtonElement\n\t\t\t\t\t\t);\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst mediaFormatLinks = mediaCenterBlock.querySelectorAll(\n\t\t\t\t`.${ linkFormatCssClass }`\n\t\t\t);\n\t\t\t// mediaFormatLinks.forEach( function ( mediaFormatLinkElement ) {\n\t\t\t// \trenderReplace(\n\t\t\t// \t\t<MediaLinkFormatType\n\t\t\t// \t\t\telRef={ mediaFormatLinkElement }\n\t\t\t// \t\t\tmediaSourceId={ mediaSourceReference }\n\t\t\t// \t\t/>,\n\t\t\t// \t\tmediaFormatLinkElement\n\t\t\t// \t);\n\t\t\t// } );\n\t\t} );\n\t}\n} );\n","/**\n * WordPress dependencies\n */\nimport { select } from '@wordpress/data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport {\n\tEXTENDED_MEDIA_BLOCKS,\n\tMEDIA_BLOCKS_ATTRIBUTE_SCHEMA,\n\tEXTEND_BLOCKS_WITH_MEDIA,\n} from './constants';\n\nfunction isMediaBlockListed( name ) {\n\treturn EXTENDED_MEDIA_BLOCKS.indexOf( name ) >= 0;\n}\n\nfunction isBlockListed( name ) {\n\treturn name && EXTEND_BLOCKS_WITH_MEDIA.indexOf( name ) >= 0;\n}\n\nfunction hasBlockValidScheme( name, attributes ) {\n\t// check if the scheme is defined.\n\tif ( ! MEDIA_BLOCKS_ATTRIBUTE_SCHEMA[ name ] ) {\n\t\treturn false;\n\t}\n\n\tconst blockSchema = MEDIA_BLOCKS_ATTRIBUTE_SCHEMA[ name ];\n\n\t// check if the attribute name exists in the scheme.\n\tif ( ! attributes[ blockSchema.name ] ) {\n\t\treturn false;\n\t}\n\n\t// check attribute type.\n\tif (\n\t\t! attributes[ blockSchema.name ].type ||\n\t\tattributes[ blockSchema.name ].type !== blockSchema.type\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Check whether the given block should be extended with media source.\n *\n * @param {string} name Block name.\n * @param {Object} settings Block attributes.\n * @return {boolean} True if the block should be extended. Otherwise, False.\n */\nexport function shouldExtendMediaBlock( name, settings ) {\n\tif ( ! isMediaBlockListed( name ) ) {\n\t\treturn false;\n\t}\n\n\treturn hasBlockValidScheme( name, settings?.attributes );\n}\n\nexport function getBlockSourceProps( name ) {\n\treturn MEDIA_BLOCKS_ATTRIBUTE_SCHEMA?.[ name ];\n}\n\nexport function shouldExtendBlockWithMedia( name ) {\n\tconst selectedBlock = select( blockEditorStore ).getSelectedBlock();\n\tif ( ! isBlockListed( name || selectedBlock?.name ) ) {\n\t\treturn false;\n\t}\n\n\tif ( ! selectedBlock?.clientId ) {\n\t\treturn false;\n\t}\n\n\treturn select( blockEditorStore ).getBlockParentsByBlockName(\n\t\tselectedBlock.clientId,\n\t\t'media-manager/media-center'\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport './media-blocks/view';\n","/**\n * Internal dependencies\n */\nimport './block-library/view';\nimport './extending/view';\n","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"compose\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"domReady\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"lodash\"]; }());"],"sourceRoot":""}